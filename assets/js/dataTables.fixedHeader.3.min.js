!function(a){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){"use strict";var e=a.fn.dataTable,f=0,g=function(c,d){if(!(this instanceof g))throw"FixedHeader must be initialised with the 'new' keyword.";d===!0&&(d={}),c=new e.Api(c),this.c=a.extend(!0,{},g.defaults,d),this.s={dt:c,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:a(b).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:c.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+f++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:a(c.table().header()),tbody:a(c.table().body()),tfoot:a(c.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var h=c.settings()[0];if(h._fixedHeader)throw"FixedHeader already initialised on table "+h.nTable.id;h._fixedHeader=this,this._constructor()};return a.extend(g.prototype,{enable:function(a){this.s.enable=a,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(a){return a!==d&&(this.c.headerOffset=a,this.update()),this.c.headerOffset},footerOffset:function(a){return a!==d&&(this.c.footerOffset=a,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var c=this,d=this.s.dt;a(b).on("scroll"+this.s.namespace,function(){c._scroll()}).on("resize"+this.s.namespace,function(){c.s.position.windowHeight=a(b).height(),c.update()});var e=a(".fh-fixedHeader");!this.c.headerOffset&&e.length&&(this.c.headerOffset=e.outerHeight());var f=a(".fh-fixedFooter");!this.c.footerOffset&&f.length&&(this.c.footerOffset=f.outerHeight()),d.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc",function(){c.update()}),d.on("destroy.dtfc",function(){d.off(".dtfc"),a(b).off(c.s.namespace)}),this._positions(),this._scroll()},_clone:function(b,c){var d=this.s.dt,e=this.dom[b],f="header"===b?this.dom.thead:this.dom.tfoot;!c&&e.floating?e.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(e.floating&&(e.placeholder.remove(),this._unsize(b),e.floating.children().detach(),e.floating.remove()),e.floating=a(d.table().node().cloneNode(!1)).css("table-layout","fixed").removeAttr("id").append(f).appendTo("body"),e.placeholder=f.clone(!1),e.host.prepend(e.placeholder),this._matchWidths(e.placeholder,e.floating))},_matchWidths:function(b,c){var d=function(c){return a(c,b).map(function(){return a(this).width()}).toArray()},e=function(b,d){a(b,c).each(function(b){a(this).css({width:d[b],minWidth:d[b]})})},f=d("th"),g=d("td");e("th",f),e("td",g)},_unsize:function(b){var c=this.dom[b].floating;c&&("footer"===b||"header"===b&&!this.s.autoWidth)?a("th, td",c).css({width:"",minWidth:""}):c&&"header"===b&&a("th, td",c).css("min-width","")},_horizontal:function(a,b){var c=this.dom[a],d=this.s.position,e=this.s.scrollLeft;c.floating&&e[a]!==b&&(c.floating.css("left",d.left-b),e[a]=b)},_modeChange:function(b,d,e){var g=(this.s.dt,this.dom[d]),h=this.s.position,i=this.dom["footer"===d?"tfoot":"thead"],j=a.contains(i[0],c.activeElement)?c.activeElement:null;"in-place"===b?(g.placeholder&&(g.placeholder.remove(),g.placeholder=null),this._unsize(d),"header"===d?g.host.prepend(this.dom.thead):g.host.append(this.dom.tfoot),g.floating&&(g.floating.remove(),g.floating=null)):"in"===b?(this._clone(d,e),g.floating.addClass("fixedHeader-floating").css("header"===d?"top":"bottom",this.c[d+"Offset"]).css("left",h.left+"px").css("width",h.width+"px"),"footer"===d&&g.floating.css("top","")):"below"===b?(this._clone(d,e),g.floating.addClass("fixedHeader-locked").css("top",h.tfootTop-h.theadHeight).css("left",h.left+"px").css("width",h.width+"px")):"above"===b&&(this._clone(d,e),g.floating.addClass("fixedHeader-locked").css("top",h.tbodyTop).css("left",h.left+"px").css("width",h.width+"px")),j&&j!==c.activeElement&&j.focus(),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[d+"Mode"]=b},_positions:function(){var b=this.s.dt,c=b.table(),d=this.s.position,e=this.dom,f=a(c.node()),g=f.children("thead"),h=f.children("tfoot"),i=e.tbody;d.visible=f.is(":visible"),d.width=f.outerWidth(),d.left=f.offset().left,d.theadTop=g.offset().top,d.tbodyTop=i.offset().top,d.theadHeight=d.tbodyTop-d.theadTop,h.length?(d.tfootTop=h.offset().top,d.tfootBottom=d.tfootTop+h.outerHeight(),d.tfootHeight=d.tfootBottom-d.tfootTop):(d.tfootTop=d.tbodyTop+i.outerHeight(),d.tfootBottom=d.tfootTop,d.tfootHeight=d.tfootTop)},_scroll:function(b){var g,h,d=a(c).scrollTop(),e=a(c).scrollLeft(),f=this.s.position;this.s.enable&&(this.c.header&&(g=!f.visible||d<=f.theadTop-this.c.headerOffset?"in-place":d<=f.tfootTop-f.theadHeight-this.c.headerOffset?"in":"below",(b||g!==this.s.headerMode)&&this._modeChange(g,"header",b),this._horizontal("header",e)),this.c.footer&&this.dom.tfoot.length&&(h=!f.visible||d+f.windowHeight>=f.tfootBottom+this.c.footerOffset?"in-place":f.windowHeight+d>f.tbodyTop+f.tfootHeight+this.c.footerOffset?"in":"above",(b||h!==this.s.footerMode)&&this._modeChange(h,"footer",b),this._horizontal("footer",e)))}}),g.version="3.1.2",g.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},a.fn.dataTable.FixedHeader=g,a.fn.DataTable.FixedHeader=g,a(c).on("init.dt.dtfh",function(b,c,d){if("dt"===b.namespace){var f=c.oInit.fixedHeader,h=e.defaults.fixedHeader;if((f||h)&&!c._fixedHeader){var i=a.extend({},h,f);f!==!1&&new g(c,i)}}}),e.Api.register("fixedHeader()",function(){}),e.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(a){var b=a._fixedHeader;b&&b.update()})}),e.Api.register("fixedHeader.enable()",function(a){return this.iterator("table",function(b){var c=b._fixedHeader;c&&c.enable(a!==d?a:!0)})}),e.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(a){var b=a._fixedHeader;b&&b.enable(!1)})}),a.each(["header","footer"],function(a,b){e.Api.register("fixedHeader."+b+"Offset()",function(a){var c=this.context;return a===d?c.length&&c[0]._fixedHeader?c[0]._fixedHeader[b+"Offset"]():d:this.iterator("table",function(c){var d=c._fixedHeader;d&&d[b+"Offset"](a)})})}),g});